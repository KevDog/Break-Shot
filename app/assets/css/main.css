/* Break Shot - Tailwind CSS v4 Configuration with Tailwind Plus styling */
/* Dark mode only, high contrast for pool hall/bar environments */

@import "tailwindcss";

/* Custom theme configuration */
@theme {
  /* Inter font family - required for Tailwind Plus */
  --font-sans: InterVariable, Inter, ui-sans-serif, system-ui, sans-serif;
  --font-sans--font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';

  /* Colors - Dark theme with Tailwind Plus patterns */
  --color-bg-primary: #09090b;
  --color-bg-secondary: #18181b;
  --color-bg-tertiary: #27272a;
  --color-bg-elevated: #3f3f46;

  --color-text-primary: #fafafa;
  --color-text-secondary: #a1a1aa;
  --color-text-muted: #71717a;

  --color-accent: #22c55e;
  --color-accent-dim: #16a34a;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  --color-success: #22c55e;

  /* Turn indicators */
  --color-active-turn: #22c55e;
  --color-inactive-turn: #3f3f46;

  /* Connection status */
  --color-online: #22c55e;
  --color-offline: #ef4444;
  --color-reconnecting: #f59e0b;

  /* Font sizes */
  --font-size-4xl: 48px;
  --font-size-score: 64px;

  /* Touch targets (minimum 44x44px per requirements) */
  --touch-target-min: 44px;
  --button-height: 44px;
  --button-height-lg: 52px;

  /* Border radius matching Tailwind Plus */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.5rem;

  /* Safe area insets for notched devices */
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
}

/* Base layer customizations */
@layer base {
  html {
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
    @apply scheme-dark;
  }

  body {
    @apply font-sans text-base leading-normal text-text-primary bg-bg-primary min-h-screen overflow-x-hidden antialiased;
  }

  /* App container with safe areas */
  #__nuxt {
    min-height: 100vh;
    min-height: 100dvh;
    padding-top: var(--safe-area-top);
    padding-bottom: var(--safe-area-bottom);
    padding-left: var(--safe-area-left);
    padding-right: var(--safe-area-right);
  }

  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold leading-tight tracking-tight text-text-primary;
  }

  h1 { @apply text-3xl sm:text-4xl; }
  h2 { @apply text-2xl sm:text-3xl; }
  h3 { @apply text-xl sm:text-2xl; }

  /* Links */
  a {
    @apply text-accent no-underline hover:underline focus:underline focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent;
  }

  /* Buttons reset */
  button {
    @apply font-sans cursor-pointer border-none bg-transparent text-inherit;
  }

  button:disabled {
    @apply cursor-not-allowed opacity-50;
  }

  /* Form elements - Catalyst-style base */
  input,
  textarea,
  select {
    @apply font-sans text-base text-text-primary bg-bg-tertiary border border-bg-elevated rounded-lg px-3.5 py-2.5 w-full;
    @apply focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent;
    @apply placeholder:text-text-muted;
    @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-bg-secondary;
    min-height: var(--touch-target-min);
  }

  /* Select arrow styling */
  select {
    @apply appearance-none bg-no-repeat;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2371717a' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-size: 1.25rem 1.25rem;
    padding-right: 2.5rem;
  }
}

/* Component layer for reusable styles */
@layer components {
  /* Catalyst-style button base - kept for backwards compatibility */
  .btn {
    @apply relative isolate inline-flex items-center justify-center gap-x-2 rounded-lg border text-base/6 font-semibold;
    @apply px-3 py-1.5 sm:text-sm/6;
    @apply focus:outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    @apply transition-colors duration-100 select-none;
    min-height: var(--button-height);
    min-width: var(--touch-target-min);
  }

  .btn--primary {
    @apply border-transparent bg-accent text-bg-primary hover:bg-accent-dim active:bg-accent-dim;
  }

  .btn--secondary {
    @apply border-bg-elevated bg-bg-tertiary text-text-primary hover:bg-bg-elevated active:bg-bg-elevated;
  }

  .btn--danger {
    @apply border-transparent bg-error text-white hover:bg-red-600 active:bg-red-700;
  }

  .btn--ghost {
    @apply border-transparent bg-transparent text-text-secondary hover:bg-bg-secondary hover:text-text-primary;
  }

  .btn--outline {
    @apply bg-transparent border-bg-elevated text-text-primary hover:bg-bg-secondary;
  }

  .btn--large {
    @apply text-base px-4 py-2.5;
    min-height: var(--button-height-lg);
  }

  .btn--sm {
    @apply px-2.5 py-1 text-sm;
    min-height: 36px;
  }

  .btn--full {
    @apply w-full;
  }

  /* Social login buttons - Catalyst-style */
  .btn--social {
    @apply relative isolate inline-flex items-center justify-center gap-3 w-full rounded-lg border;
    @apply px-3.5 py-2.5 text-sm/6 font-semibold;
    @apply transition-colors duration-100;
    min-height: var(--button-height);
  }

  .btn--google {
    @apply border-zinc-300 bg-white text-zinc-900 hover:bg-zinc-50 active:bg-zinc-100;
  }

  .btn--apple {
    @apply border-zinc-700 bg-zinc-900 text-white hover:bg-zinc-800 active:bg-zinc-700;
  }

  .btn--facebook {
    @apply border-transparent text-white;
    background-color: #1877F2;
  }

  .btn--facebook:hover:not(:disabled) {
    background-color: #166fe5;
  }

  .btn__icon {
    @apply size-5 shrink-0;
  }

  /* Divider with text - Catalyst-style */
  .divider-text {
    @apply flex items-center gap-4 my-6 text-text-muted text-sm;
  }

  .divider-text::before,
  .divider-text::after {
    content: '';
    @apply flex-1 h-px bg-bg-elevated;
  }

  /* Card component - Catalyst-style */
  .card {
    @apply bg-bg-secondary rounded-xl p-6 ring-1 ring-white/10;
  }

  /* Score display - extra large for visibility */
  .score-display {
    font-size: var(--font-size-score);
    @apply font-bold leading-none;
    font-variant-numeric: tabular-nums;
  }

  /* Connection status indicator */
  .status-indicator {
    @apply size-2 rounded-full inline-block;
  }

  .status-indicator--online {
    @apply bg-online;
  }

  .status-indicator--offline {
    @apply bg-offline;
  }

  .status-indicator--reconnecting {
    @apply bg-reconnecting animate-pulse;
  }

  /* Alert/Notice styles - Catalyst-style */
  .alert {
    @apply rounded-lg p-4 text-sm ring-1 ring-inset;
  }

  .alert--error {
    @apply bg-error/10 text-error ring-error/20;
  }

  .alert--success {
    @apply bg-success/10 text-success ring-success/20;
  }

  .alert--warning {
    @apply bg-warning/10 text-warning ring-warning/20;
  }

  /* Fieldset styling */
  .fieldset {
    @apply space-y-6;
  }

  .fieldset-legend {
    @apply text-base/7 font-semibold text-text-primary;
  }
}

/* Utility layer */
@layer utilities {
  /* Visually hidden for accessibility */
  .visually-hidden {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
  }

  /* High contrast text for WCAG AAA */
  .high-contrast {
    @apply text-text-primary;
    text-shadow: 0 0 1px rgba(0, 0, 0, 0.5);
  }

  /* Text colors */
  .text-text-primary { color: var(--color-text-primary); }
  .text-text-secondary { color: var(--color-text-secondary); }
  .text-text-muted { color: var(--color-text-muted); }
  .text-accent { color: var(--color-accent); }
  .text-warning { color: var(--color-warning); }
  .text-error { color: var(--color-error); }
  .text-success { color: var(--color-success); }

  /* Background colors */
  .bg-bg-primary { background-color: var(--color-bg-primary); }
  .bg-bg-secondary { background-color: var(--color-bg-secondary); }
  .bg-bg-tertiary { background-color: var(--color-bg-tertiary); }
  .bg-bg-elevated { background-color: var(--color-bg-elevated); }
  .bg-accent { background-color: var(--color-accent); }
  .bg-accent-dim { background-color: var(--color-accent-dim); }
  .bg-warning { background-color: var(--color-warning); }
  .bg-error { background-color: var(--color-error); }
  .bg-success { background-color: var(--color-success); }
  .bg-online { background-color: var(--color-online); }
  .bg-offline { background-color: var(--color-offline); }
  .bg-reconnecting { background-color: var(--color-reconnecting); }

  /* Border colors */
  .border-bg-elevated { border-color: var(--color-bg-elevated); }
  .border-accent { border-color: var(--color-accent); }
  .border-warning { border-color: var(--color-warning); }
  .border-error { border-color: var(--color-error); }
  .border-success { border-color: var(--color-success); }

  /* Ring/outline colors */
  .ring-accent { --tw-ring-color: var(--color-accent); }
  .ring-error { --tw-ring-color: var(--color-error); }
  .ring-success { --tw-ring-color: var(--color-success); }

  /* Focus ring utilities */
  .focus-ring {
    @apply focus:outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent;
  }

  /* Font size 4xl */
  .text-4xl { font-size: var(--font-size-4xl); }
}

/* Prevent zoom on input focus (iOS) */
@media screen and (max-width: 768px) {
  input,
  textarea,
  select {
    font-size: 16px;
  }
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Bounce animation for waiting indicators */
@keyframes bounce {
  0%, 80%, 100% {
    transform: scale(0);
  }
  40% {
    transform: scale(1);
  }
}

.animate-bounce-dots span {
  @apply size-2 rounded-full inline-block;
  animation: bounce 1.4s infinite ease-in-out both;
}

.animate-bounce-dots span:nth-child(1) {
  animation-delay: -0.32s;
}

.animate-bounce-dots span:nth-child(2) {
  animation-delay: -0.16s;
}

/* Spinner */
.spinner {
  @apply size-10 border-3 border-bg-elevated rounded-full animate-spin;
  border-top-color: var(--color-accent);
}
